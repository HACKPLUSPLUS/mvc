function displayMessage(t){$("#flight-data").append("<div>"+t+"</div>")}function displayLoader(){html='<div class="show">',html+='<div class="progress" role="progressbar" data-goal="100" aria-valuemin="0" aria-valuemax="100" aria-valuenow="13">',html+='<div class="progress__bar" style="width: 13%;"></div>',html+="</div>",html+='<div id="wachtmelding" class="textcenter">Wij maken nu verbinding</div>',html+="</div>",$("#flight-data").html(html);var t=0,e=[];e[1]="Wij halen nu alle beschikbare vluchten op",e[2]="Lorum IPsum version 6.0",e[3]="Beschikbaarheid wordt live gecontroleerd",e[4]="De meest actuele prijzen worden nu ingeladen",$(".progress").asProgress({namespace:"progress",speed:80,onUpdate:function(i){var r=this.getPercentage(i);100==r&&(t++,$("#wachtmelding").html(e[t]),$(".progress").asProgress("reset"))},onReset:function(){setTimeout(function(){$(".progress").asProgress("start")},300)}})}function displaySegment(t,e){return className="Terugreis"===t?" gly-rotate-90":"",html='<div class="textleft width100">',html+='<div class="floatleft width10 margintop20 marginright10"><i class="fa fa-plane fa-2x vertical-align-middle margin-right-15'+className+'"></i></div>',html+='<div class="floatleft width80">',html+='<span class="bold">'+t+" "+changeDateFormat(e.departureDate)+"</span>",html+='<span class="width100">'+e.departureTime.substring(0,5)+"  "+e.departure+' <span class="'+e.carrierFullName.toLowerCase()+'-logo floatright"></span></span>',html+='<span class="width100">'+e.arrivalTime.substring(0,5)+"  "+e.arrival+"</span>",html+="</div>",html+="</div>",html}function displayFlight(t,e){style=1===t?"borderblue1":"bordergrey1",style2=1===t?"borderbottomwhite1 ":"borderbottomgrey1 ",html='<div id="'+t+'" data-flight="" class="width45 marginright10 height250 textcenter flightprice_choice flight_result '+style+' marginbottom10">',html+='<div class="padding10">',html+=displaySegment("Heenreis",e.outbound),html+='<div class="'+style2+'height1 width100 margintop10 marginbottom10 hrdiv"></div>',html+=displaySegment("Terugreis",e.inbound),html+='<div class="'+style2+'height1 width100 margintop10 marginbottom10 hrdiv"></div>',html+='<div class="prijsb font14">+ &euro; '+Math.ceil(e.price/2)+" p.p.</div>",selected=1===t?' checked="checked"':"",html+='<input name="flights" type="radio" class="marginright5"'+selected+' data-flight="">',html+="</div>",html+="</div>",$("#flight-data").append(html),$("#"+t).attr("data-flight",JSON.stringify(e))}function displayRemoveFlightsButton(){html='<div class="regelpadding overflow-auto clear-both">',html+='<a id="remove-flights" class="button midblauwbg font16 width100 rounded">Vluchten verwijderen > cruise only</a>',html+="</div>",$("#flight-data").append(html),$("#remove-flights").on("click",function(){$("#search-flights").show(),$("#flight-data").empty(),$(".prijsoverzicht_segmenten").addClass("displaynone"),$("#offerte_checkbox_vluchten").prop("checked",!1),$("#cruisepagina_vervoer").html("Cruise Only"),calculatePrice()})}function persistFlightData(t){$(".flightprice_choice").removeClass("lichtblauwbg"),$(".flightprice_choice").removeClass("borderblue1"),$(".flightprice_choice").addClass("bordergrey1"),$(".hrdiv").removeClass("borderbottomwhite1"),$(".hrdiv").addClass("borderbottomgrey1"),withoutFlight=JSON.parse($("#jsonString").val()),"undefined"==typeof withoutFlight.grandTotalWithoutFlight&&(withoutFlight.grandTotalWithoutFlight=withoutFlight.totaalPrijs),"undefined"==typeof withoutFlight.pricePerPersonWithoutFlight&&(withoutFlight.pricePerPersonWithoutFlight=withoutFlight.prijsPP),t.price=Math.ceil(t.price),totalPerPerson=t.price/2+Math.floor(withoutFlight.pricePerPersonWithoutFlight),grandTotal=t.price+withoutFlight.grandTotalWithoutFlight,withoutFlight.totaalPrijs=grandTotal,withoutFlight.prijsPP=totalPerPerson,withoutFlight[1].flightAdult=t.price/2,withoutFlight[1].flightChild=t.price/2,withoutFlight[1].flightInfant=t.price/2,withoutFlight.vluchtmaatschappij=t.outbound.carrierFullName,withoutFlight.transfers="Y",withoutFlight.vlucht_heen_datum="di "+t.outbound.departureDate,withoutFlight.vlucht_heen_steden=t.outbound.departure+" - "+t.outbound.arrival,withoutFlight.vlucht_heen_tijd_vertrek="di "+t.outbound.departureTime,withoutFlight.vlucht_heen_tijd_aankomst="di "+t.outbound.arrivalTime,withoutFlight.vlucht_heen_duur=t.outbound.totalFlyTime,withoutFlight.vlucht_heen_vluchtnummer=t.outbound.flightCode,withoutFlight.vlucht_heen_overstap=t.outbound.stops,withoutFlight.vlucht_terug_datum="zo "+t.inbound.departureDate,withoutFlight.vlucht_terug_steden=t.inbound.departure+" - "+t.inbound.arrival,withoutFlight.vlucht_terug_tijd_vertrek="zo "+t.inbound.departureTime,withoutFlight.vlucht_terug_tijd_aankomst="zo "+t.inbound.arrivalTime,withoutFlight.vlucht_terug_duur=t.inbound.totalFlyTime,withoutFlight.vlucht_terug_vluchtnummer=t.inbound.flightCode,withoutFlight.vlucht_terug_overstap=t.inbound.stops,withoutFlight.vlucht_prijs=t.price/2,withoutFlight.cruisefly="dynamic",$("#jsonString").val(JSON.stringify(withoutFlight)),html='<span class="width58 floatleft">'+t.adults+'x heenvlucht</span><span class="variabel width38 textright floatright">&euro; '+t.price/2+",-</span>",html+='<span class="width58 floatleft">'+t.adults+'x terugvlucht</span><span class="variabel width38 textright floatright">&euro; '+t.price/2+",-</span>",$("#prijsoverzicht_vluchten").html(html),$("#cruisepagina_vervoer").html("Cruise + Vluchten"),$("#boekingsoverzicht_totaalprijs").html("&euro; "+grandTotal+",-"),$("#boekingsoverzicht_pp").html("&euro; "+totalPerPerson+",-"),$(".prijsoverzicht_segmenten").removeClass("displaynone"),$(".prijsoverzicht_segment_titel_transfers").remove()}function changeDateFormat(t){var e=new Date(t);return weekDays[e.getDay()]+" "+e.getDate()+" "+months[e.getMonth()]+" "+e.getFullYear()}departureDate=$("#boekingsoverzicht_vertrekdatum2").text(),departureDate=departureDate.trim(),formattedDepatureDate=departureDate.substr(6,4)+"-"+departureDate.substr(3,2)+"-"+departureDate.substr(0,2);var weekDays=new Array;weekDays[0]="zondag",weekDays[1]="maandag",weekDays[2]="dinsdag",weekDays[3]="woensdag",weekDays[4]="donderdag",weekDays[5]="vrijdag",weekDays[6]="zaterdag";var months=new Array;months[0]="januarie",months[1]="februarie",months[2]="maart",months[3]="april",months[4]="mei",months[5]="juni",months[6]="juli",months[7]="augustus",months[8]="september",months[9]="oktober",months[10]="november",months[11]="december",$("#search-flights").on("click",function(){$("#search-flights").hide(),departureDate=$("#boekingsoverzicht_vertrekdatum2").text(),departureDate=departureDate.trim(),returnDate=$("#boekingsoverzicht_terugkeerdatum2").text(),returnDate=returnDate.trim(),formattedDepatureDate=departureDate.substr(6,4)+"-"+departureDate.substr(3,2)+"-"+departureDate.substr(0,2),displayLoader(),$.ajax({url:"/api/boemm/index.php",method:"post",data:{departureDate:formattedDepatureDate,returnDate:returnDate,destinationAirport:destinationAirport,departureAirport:"AMS",preferredCarrier:[],filters:filters,transferMargin:transferMargin},success:function(t){return $("#flight-data").empty(),"failure"===t.result||"object"!=typeof t.data?(displayMessage("De zoek vluchten webservice antwoorde met een failure code. Probeer het opnieuw."),void $("#search-flights").show()):0===t.data.filtered.length?(displayMessage("Er zijn geen vluchten gevonden, probeer het opnieuw"),void $("#search-flights").show()):($("#offerte_checkbox_vluchten").prop("checked",!0),$.each(t.data.filtered,function(t,e){2>t&&displayFlight(t+1,e),0===t&&persistFlightData(e)}),displayRemoveFlightsButton(),$(".flightprice_choice:first").addClass("lichtblauwbg"),$(".flightprice_choice:first").find(".hrdiv").removeClass("borderbottomgrey1"),$(".flightprice_choice:first").find(".hrdiv").addClass("borderbottomwhite1"),$(".inclusief_vluchten").removeClass("displaynone"),$(".extra_optioneel_cruisefly").addClass("displaynone"),void $(".flight_result").on("click",function(){persistFlightData($(this).data("flight")),$(this).addClass("border"),$(this).addClass("lichtblauwbg"),$(this).removeClass("bordergrey1"),$(this).addClass("borderblue1"),$(this).find("input:radio").prop("checked",!0),$(this).find(".hrdiv").removeClass("borderbottomgrey1"),$(this).find(".hrdiv").addClass("borderbottomwhite1")}))}}).fail(function(){$("#flight-data").empty(),displayMessage("Er ging iets mis. Probeer het opnieuw."),$("#search-flights").show()}).always(function(){})});